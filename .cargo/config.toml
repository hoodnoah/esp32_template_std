# ESP32 Rust Build Configuration
#
# To change targets, update:
#   1. [build] target below
#   2. [target.XXX] section name
#   3. [env] MCU value
#   4. justfile TARGET variable
#   5. Run `just setup` to install toolchain for new target

[build]
# Default target: ESP32-S3 (Xtensa)
# Xtensa targets: xtensa-esp32-espidf, xtensa-esp32s2-espidf, xtensa-esp32s3-espidf
# RISC-V targets: riscv32imc-esp-espidf (C2/C3), riscv32imac-esp-espidf (C6/H2)
target = "xtensa-esp32s3-espidf"

[target.xtensa-esp32s3-espidf]
linker = "ldproxy"
runner = "espflash flash --monitor --partition-table partitions.csv"
rustflags = ["--cfg", "espidf_time64"]

# Uncomment for ESP32 (original)
# [target.xtensa-esp32-espidf]
# linker = "ldproxy"
# runner = "espflash flash --monitor --partition-table partitions.csv"
# rustflags = ["--cfg", "espidf_time64"]

# Uncomment for ESP32-S2
# [target.xtensa-esp32s2-espidf]
# linker = "ldproxy"
# runner = "espflash flash --monitor --partition-table partitions.csv"
# rustflags = ["--cfg", "espidf_time64"]

# Uncomment for ESP32-C3
# [target.riscv32imc-esp-espidf]
# linker = "ldproxy"
# runner = "espflash flash --monitor --partition-table partitions.csv"
# rustflags = ["--cfg", "espidf_time64"]

# Uncomment for ESP32-C6
# [target.riscv32imac-esp-espidf]
# linker = "ldproxy"
# runner = "espflash flash --monitor --partition-table partitions.csv"
# rustflags = ["--cfg", "espidf_time64"]

[unstable]
build-std = ["std", "panic_abort"]

[env]
# MCU type - must match target above
# Options: esp32, esp32s2, esp32s3, esp32c2, esp32c3, esp32c6, esp32h2
MCU = "esp32s3"

# ESP-IDF version
ESP_IDF_VERSION = "v5.3.3"
